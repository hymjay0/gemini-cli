It seems the Enterprise Mode does not work for in Vertex AI method. Or what goes wrong? 


│ Debug Console (ctrl+o to close)                                                                                                                              │
│                                                                                                                                                              │
│ ℹ  [Custom Endpoint] Using custom endpoint: https://stork.apps.ocp8.uat.dbs.com                                                                              │
│ ℹ  Authenticated via "vertex-ai".                                                                                                                            │
│ ⚠  [Enterprise Mode] Token counting is disabled in this enterprise environment. Using local estimation.                                                      │
│ ⚠  [Enterprise Mode] Streaming is disabled in this enterprise environment. Using non-streaming mode.                                                         │
│ ✖  Error when talking to Gemini API Full report available at:                                                                                                │
│    C:\Users\jayho\AppData\Local\Temp\gemini-client-error-Turn.run-sendMessageStream-2025-07-14T10-14-51-214Z.json                                            │
│ ✖  Error generating JSON content via API. Full report available at:                                                                                          │
│    C:\Users\jayho\AppData\Local\Temp\gemini-client-error-generateJson-api-2025-07-14T10-14-51-243Z.json                                                      │
│ ⚠  Failed to talk to Gemini endpoint when seeing if conversation should continue. Error: Failed to generate JSON content: Could not load the default         │
│    credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.                                                 │
│        at GeminiClient.generateJson                                                                                                                          │
│    (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/packages/core/dist/src/core/client.js:289:19)                        │
│        at async checkNextSpeaker                                                                                                                             │
│    (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/packages/core/dist/src/utils/nextSpeakerChecker.js:98:33)            │
│        at async GeminiClient.sendMessageStream                                                                                                               │
│    (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/packages/core/dist/src/core/client.js:227:38)                        │
│        at async file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/packages/cli/dist/src/ui/hooks/useGeminiStream.js:277:26 │
│        at async file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/packages/cli/dist/src/ui/hooks/useGeminiStream.js:352:38 │


```gemini-client-error-Turn.run-sendMessageStream-2025-07-14T10-27-23-799Z.json
{
  "error": {
    "message": "Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",
    "stack": "Error: Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.\n    at GoogleAuth.getApplicationDefaultAsync (C:\\Users\\jayho\\OneDrive - DBS Bank Ltd\\Repos\\gemini-cli-interceptor\\node_modules\\google-auth-library\\build\\src\\auth\\googleauth.js:287:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GoogleAuth._GoogleAuth_determineClient (C:\\Users\\jayho\\OneDrive - DBS Bank Ltd\\Repos\\gemini-cli-interceptor\\node_modules\\google-auth-library\\build\\src\\auth\\googleauth.js:834:32)\n    at async GoogleAuth.getClient (C:\\Users\\jayho\\OneDrive - DBS Bank Ltd\\Repos\\gemini-cli-interceptor\\node_modules\\google-auth-library\\build\\src\\auth\\googleauth.js:698:20)\n    at async GoogleAuth.getRequestHeaders (C:\\Users\\jayho\\OneDrive - DBS Bank Ltd\\Repos\\gemini-cli-interceptor\\node_modules\\google-auth-library\\build\\src\\auth\\googleauth.js:730:24)\n    at async NodeAuth.addGoogleAuthHeaders (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/node_modules/@google/genai/dist/node/index.mjs:16784:29)\n    at async ApiClient.getHeadersInternal (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/node_modules/@google/genai/dist/node/index.mjs:13203:9)\n    at async ApiClient.includeExtraHttpOptionsToRequestInit (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/node_modules/@google/genai/dist/node/index.mjs:13078:31)\n    at async ApiClient.request (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/node_modules/@google/genai/dist/node/index.mjs:13024:23)\n    at async Models.generateContent (file:///C:/Users/jayho/OneDrive%20-%20DBS%20Bank%20Ltd/Repos/gemini-cli-interceptor/node_modules/@google/genai/dist/node/index.mjs:14337:24)"
  },
  "context": [
    {
      "role": "user",
      "parts": [
        {
          "text": "This is the Gemini CLI. We are setting up the context for our chat.\n  Today's date is Monday, July 14, 2025.\n  My operating system is: win32\n  I'm currently working in the directory: C:\\Users\\jayho\\OneDrive - DBS Bank Ltd\\Repos\\gemini-cli-interceptor\n  Showing up to 200 items (files + folders). Folders or files indicated with ... contain more items not shown, were ignored, or the display limit (200 items) was reached.\n\nC:/Users/jayho/OneDrive - DBS Bank Ltd/Repos/gemini-cli-interceptor/\n├───.editorconfig\n├───.env.example\n├───.gitattributes\n├───.gitignore\n├───.npmrc\n├───.prettierrc.json\n├───.ssotoken\n├───CONTRIBUTING.md\n├───Dockerfile\n├───ENTERPRISE_ADAPTATION.md\n├───esbuild.config.js\n├───eslint.config.js\n├───GEMINI.md\n├───getToken.js\n├───LICENSE\n├───Makefile\n├───package-lock.json\n├───package.json\n├───README.md\n├───test-interceptor.js\n├───tsconfig.json\n├───.gcp/\n│   ├───Dockerfile.gemini-code-builder\n│   └───release-docker.yaml\n├───.gemini/\n│   ├───.env\n│   └───config.yaml\n├───.github/\n│   ├───CODEOWNERS\n│   ├───pull_request_template.md\n│   ├───actions/\n│   │   └───post-coverage-comment/\n│   │       └───action.yml\n│   ├───ISSUE_TEMPLATE/\n│   │   ├───bug_report.yml\n│   │   └───feature_request.yml\n│   ├───scripts/\n│   │   └───pr-triage.sh_blocked.pdf\n│   └───workflows/\n│       ├───ci.yml\n│       ├───community-report.yml_blocked.pdf\n│       ├───e2e.yml\n│       ├───gemini-automated-issue-triage.yml\n│       ├───gemini-scheduled-issue-triage.yml_blocked.pdf\n│       ├───gemini-scheduled-pr-triage.yml\n│       └───release.yml\n├───.vscode/\n│   ├───launch.json\n│   ├───settings.json\n│   └───tasks.json\n├───bundle/\n│   ├───gemini.js\n│   ├───sandbox-macos-permissive-closed.sb\n│   ├───sandbox-macos-permissive-open.sb\n│   ├───sandbox-macos-permissive-proxied.sb\n│   ├───sandbox-macos-restrictive-closed.sb\n│   ├───sandbox-macos-restrictive-open.sb\n│   └───sandbox-macos-restrictive-proxied.sb\n├───docs/\n│   ├───architecture.md\n│   ├───checkpointing.md\n│   ├───deployment.md\n│   ├───env-example.md\n│   ├───extension.md\n│   ├───index.md\n│   ├───integration-tests.md\n│   ├───npm.md\n│   ├───quota-and-pricing.md\n│   ├───sandbox.md\n│   ├───telemetry.md\n│   ├───tos-privacy.md\n│   ├───troubleshooting.md\n│   ├───Uninstall.md\n│   ├───assets/\n│   │   ├───connected_devtools.png\n│   │   ├───gemini-screenshot.png\n│   │   ├───theme-ansi-light.png\n│   │   ├───theme-ansi.png\n│   │   ├───theme-atom-one.png\n│   │   ├───theme-ayu-light.png\n│   │   ├───theme-ayu.png\n│   │   ├───theme-default-light.png\n│   │   ├───theme-default.png\n│   │   ├───theme-dracula.png\n│   │   ├───theme-github-light.png\n│   │   ├───theme-github.png\n│   │   ├───theme-google-light.png\n│   │   └───theme-xcode-light.png\n│   ├───cli/\n│   │   ├───authentication.md\n│   │   ├───commands.md\n│   │   ├───configuration.md\n│   │   ├───index.md\n│   │   ├───themes.md\n│   │   ├───token-caching.md\n│   │   └───tutorials.md\n│   ├───core/\n│   │   ├───index.md\n│   │   ├───memport.md\n│   │   └───tools-api.md\n│   ├───examples/\n│   │   └───proxy-script.md\n│   └───tools/\n│       ├───file-system.md\n│       ├───index.md\n│       ├───mcp-server.md\n│       ├───memory.md\n│       ├───multi-file.md\n│       ├───shell.md\n│       ├───web-fetch.md\n│       └───web-search.md\n├───eslint-rules/\n│   └───no-relative-cross-package-imports.js\n├───integration-tests/\n│   ├───file-system.test.js\n│   ├───google_web_search.test.js\n│   ├───list_directory.test.js\n│   ├───read_many_files.test.js\n│   ├───replace.test.js\n│   ├───run_shell_command.test.js\n│   ├───run-tests.js\n│   ├───save_memory.test.js\n│   ├───simple-mcp-server.test.js\n│   ├───test-helper.js\n│   └───write_file.test.js\n├───node_modules/...\n├───packages/\n│   ├───cli/\n│   │   ├───index.ts\n│   │   ├───package.json\n│   │   ├───tsconfig.json\n│   │   ├───vitest.config.ts\n│   │   ├───dist/...\n│   │   ├───node_modules/...\n│   │   └───src/\n│   │       ├───gemini.test.tsx\n│   │       ├───gemini.tsx\n│   │       ├───nonInteractiveCli.test.ts\n│   │       ├───nonInteractiveCli.ts\n│   │       ├───config/\n│   │       │   ├───auth.test.ts\n│   │       │   ├───auth.ts\n│   │       │   ├───config.integration.test.ts\n│   │       │   ├───config.test.ts\n│   │       │   ├───config.ts\n│   │       │   ├───extension.test.ts\n│   │       │   ├───extension.ts\n│   │       │   ├───sandboxConfig.ts\n│   │       │   ├───settings.test.ts\n│   │       │   └───settings.ts\n│   │       ├───generated/\n│   │       │   └───git-commit.ts\n│   │       ├───services/\n│   │       ├───test-utils/\n│   │       ├───ui/\n│   │       └───utils/\n│   └───core/\n│       ├───index.ts\n│       ├───package-lock.json\n│       ├───package.json\n│       ├───test-setup.ts\n│       ├───tsconfig.json\n│       ├───vitest.config.ts\n│       ├───dist/...\n│       ├───node_modules/...\n│       └───src/\n│           ├───index.test.ts\n│           ├───index.ts\n│           ├───__mocks__/\n│           ├───auth/\n│           ├───code_assist/\n│           ├───config/\n│           ├───core/\n│           ├───services/\n│           ├───telemetry/\n│           ├───tools/\n│           └───utils/\n└───scripts/\n    ├───build_package.js\n    ├───build_sandbox.js\n    ├───build.js\n    ├───check-build-status.js\n    ├───clean.js\n    ├───copy_bundle_assets.js\n    ├───copy_files.js\n    ├───create_alias.sh\n    ├───generate-git-commit-info.js\n    ├───get-release-version.js\n    ├───local_telemetry.js\n    ├───prepare-package.js\n    ├───sandbox_command.js\n    ├───start.js\n    ├───telemetry_gcp.js\n    ├───telemetry_utils.js\n    ├───telemetry.js\n    ├───version.js\n    └───tests/\n        ├───get-release-version.test.js\n        ├───test-setup.ts\n        └───vitest.config.ts"
        }
      ]
    },
    {
      "role": "model",
      "parts": [
        {
          "text": "Got it. Thanks for the context!"
        }
      ]
    },
    "hi"
  ]
}
```
